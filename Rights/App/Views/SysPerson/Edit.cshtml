@model Langben.DAL.SysPerson

@{
    Layout = "~/Views/Shared/Edit.cshtml";
}
@using Common
@using Models
 @section CurentPlace {
    修改  
}

    <fieldset>
        <legend>
            <input class="a2 f2" type="submit" value="修改" />
            <input class="a2 f2" type="button" onclick="BackList('SysPerson')" value="返回列表" />
        </legend>
        <div class="bigdiv">
       

            <div style="float:right; width:379px;height:184px;">
                <img id="showPic" src="~/Images/noPic.jpg" width="149" height="175" />
                <div style="float:left">
                    <div id="uploader-demo">
                        <!--用来存放item-->
                        <div id="fileList" style="display:none;" class="uploader-list"></div>
                        <div id="filePicker">上传头像</div>
                    </div>
                </div>
            </div>


            @Html.HiddenFor(model => model.Id )      
            <div class="editor-label">
                @Html.LabelFor(model => model.Name)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.MyName)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.MyName)
                @Html.ValidationMessageFor(model => model.MyName)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.Password)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Password)
                @Html.ValidationMessageFor(model => model.Password)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.SurePassword)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.SurePassword)
                @Html.ValidationMessageFor(model => model.SurePassword)
            </div>        
            <div class="editor-label">
                @Html.LabelFor(model => model.Sex)：
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.Sex,Models.SysFieldModels.GetSysField("SysPerson","Sex"),"请选择")
            </div>      
            <div class="editor-label">
                <a class="anUnderLine" onclick="showModalOnly('SysDepartmentId','../../SysDepartment');">
                    @Html.LabelFor(model => model.SysDepartmentId) 
                </a>：
            </div>
            <div class="editor-field">
                <div id="checkSysDepartmentId">
                        @if(Model!=null)
                        {
                        if (null != Model.SysDepartmentId)                      
                        { 
                    <table id="@Model.SysDepartmentId"
                        class="deleteStyle">
                        <tr>
                            <td>
                                <img alt="删除"  title="点击删除" onclick="deleteTable('@Model.SysDepartmentId ','SysDepartmentId');" src="../../../Images/deleteimge.png" />
                            </td>
                            <td>
                                @Model.SysDepartment.Name
                            </td>
                        </tr>
                    </table>
                    }} 
                </div>
                @Html.HiddenFor(model => model.SysDepartmentId)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.Position)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Position)
                @Html.ValidationMessageFor(model => model.Position)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.MobilePhoneNumber)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.MobilePhoneNumber)
                @Html.ValidationMessageFor(model => model.MobilePhoneNumber)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.PhoneNumber)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.PhoneNumber)
                @Html.ValidationMessageFor(model => model.PhoneNumber)
            </div>        
            <div class="editor-label">
                @Html.LabelFor(model => model.Province)：
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.Province,Models.SysFieldModels.GetSysField("SysPerson","Province"),"请选择")
            </div>        
            <div class="editor-label">
                @Html.LabelFor(model => model.City)：
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.City,Models.SysFieldModels.GetSysField("SysPerson","City",Model.Province),"请选择")
            </div>        
            <div class="editor-label">
                @Html.LabelFor(model => model.Village)：
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.Village,Models.SysFieldModels.GetSysField("SysPerson","Village",Model.City),"请选择")
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.Address)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Address)
                @Html.ValidationMessageFor(model => model.Address)
            </div>     
            <div class="editor-label">
                @Html.LabelFor(model => model.EmailAddress)：
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.EmailAddress)
                @Html.ValidationMessageFor(model => model.EmailAddress)
            </div><div class="editor-label">
    @Html.LabelFor(model => model.State)：
</div>
<div class="editor-field">
    @Html.RadioButtonListFor(model => model.State, Models.SysFieldModels.GetSysField("SysPerson", "State"), false)
</div>
            <br style="clear: both;" />
            <div class="editor-label">
                @Html.LabelFor(model => model.Remark)：
            </div>
            <div class="textarea-box">
                @Html.TextAreaFor(model => model.Remark) 
                @Html.ValidationMessageFor(model => model.Remark) 
            </div>        
           @Html.HiddenFor(model => model.CreateTime ) @Html.HiddenFor(model => model.CreatePerson )      
            </div>
        @Html.HiddenFor(model => model.HDpic)
        <input type="hidden" id="OldPic" name="OldPic" value="@(ViewBag.OldPic)"/>
        <input type="hidden" id="fileUrl" value="HDpic" />
        <script type="text/javascript" src="@Url.Content("~/Res/webuploader/js/webuploader.nolog.min.js")"></script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/UploadFile.js")"></script>
    </fieldset>

@section HeadContent{
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Res/webuploader/css/webuploader.css")" />
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Res/webuploader/images/style.css")" />
    }
    <script type="text/javascript">
        
        $(function () {
            var pic= $("#HDpic").val();
            if (pic=='') {
                $("#showPic").attr("src","/Images/noPic.jpg")
            }else
            {
                $("#showPic").attr("src", pic);//显示头像图片
            }
            $("#Province").change(function () { getCity("#City"); });

            
            $("#City").change(function () { getVillage("#Village"); });


        });
        
        function getCity(City) {
            $(City).empty();
            $("<option></option>")
                    .val("")
                    .text("请选择")
                    .appendTo($(City));
            bindDropDownList(City, "#Province");
            $(City).change();
        }

        function getVillage(Village) {
            $(Village).empty();
            $("<option></option>")
                    .val("")
                    .text("请选择")
                    .appendTo($(Village));
            bindDropDownList(Village, "#City");
            $(Village).change();
        }


    </script>



